<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sversity is the online edu. Tech division of Apcosys Private Limited and Apcosys is a software development and consultancy company with headquarter in Bangalore, India. Sversity online learning destination, offering high-quality courses from the world's best universities and institutions to learners everywhere. In the age of internet, do we really need to spend huge amount on getting degrees? One can equally quench his third for knowledge by joining online classes.">
    <title>Leapss - Leave Management System</title>
    {% load static %}
    <link href="{% static 'assets\css\admin.css' %}" rel="stylesheet"> 
    <link href="{% static 'assets\css\addEmployee.css' %}" rel="stylesheet"> 

    <!-- CSS only -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

    <!-- Ionic Icon -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css">

    <!-- bootstrap Icon  -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <!-- Google Icon -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,200,0,0" />
    <style>
        label{
            margin: 0% 2%;
        }
        /* CSS for the loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8); /* Semi-transparent white background */
            display: none;
            justify-content: center;
            align-items: center;
            z-index:99;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.3);
            border-top: 4px solid #3498db; /* Blue color for the spinner */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        /* CSS for the spinner animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body id="body-pd">
    <div class="d-flex" id="wrapper">
        <!-- Sidebar-->
        <div class="border-end bg-white border-right position-sticky header" id="sidebar-wrapper">
            <div class="justify-content-center">
                <div class="leapss"><img src="{% static 'assets/img/logo.png'%}" alt="">
                    <button class="btn" id="sidebarClose"><i class="bi bi-x navToggle"></i>  </button>
                </div>
            </div>
            <ul class="sidebar-nav " id="sidebar-nav">
                <li class="profile"data-bs-toggle="collapse">
                    <img src="{% static 'assets/img/user.png'%}" alt="" class="img-fluid rounded-circle">
                    <h6>{{request.session.Username}}</h6>
                </li>
            </ul>
            <div class="list-group list-group-flush" style="list-style:none; margin-top: 3%;">
                <!-- <button class="btn" id="sidebarClose"><span class="bi bi-x "></span></button> -->
                <li ><a class="list-group-item " href="/adminDashboard"><i class="bi bi-grid" style="margin-left: 20%; font-size:18px;"></i><span></i> <span>Home</span></a></li>
                <li><a class="list-group-item " href="/leaveApplicationDetails"> <i class="bi bi-clock" style="margin-left: 20%;font-size:18px; "></i><span></i><span>Leave Section</span></a></li>
                <li><a class="list-group-item active" href="{% url 'activeEmployee' %}"><i class="bi bi-people" style="margin-left: 20%;font-size:18px;"></i><span></i><span>Employee</span></a></li>
                <li><a class="list-group-item " href="/companySetup"><i class="bi bi-gear"style="margin-left: 20%;font-size:18px;"></i><span></i><span>Company Setup</span></a></li>
                <li><a class="list-group-item" href="{% url 'department' %}"><i class="bi bi-diagram-3"style="margin-left: 20%;font-size:18px;"></i><span></i><span>Department</span></a></li>
                <li><a class="list-group-item " href="/leavePolicySetting"><i class="bi bi-receipt"style="margin-left: 20%;font-size:18px;"></i><span></i><span>Leave Policy</span></a></li>
                
            </div>
             <div class="logout">
              <a class="nav-link"href="{% url 'logout' %}"><span class="material-symbols-outlined"style="padding:5%;font-weight: 600; position:relative;top:3px;">
                logout
                </span><span style="font-family: 'Segoe UI', sans-serif; position:relative;bottom:3px; ">Log Out</span></a>
            </div>
            
        </div>
        <!-- Page content wrapper-->
        <div id="page-content-wrapper">
            <!-- Top navigation-->
            <nav class="navbar navbar-expand-lg  align-items-center justify-content-between border-bottom">
                   
                <div class="logo d-flex align-items-center">
                    <button class="btn toggle " id="sidebarToggle"><i class="bi bi-list navToggle"></i></button>
                    <!-- <img src="{% static 'assets/img/Apcosys.png'%}" alt=""> -->
                    <span>{% if com is None %}Your Company Name{% else %}{{ com.name }}{% endif %}</span>
                  </div>
                  {% comment %} <button class="btn btn-primary">Upload by Excel</button> {% endcomment %}
                  <ul class="d-flex align-items-center header-nav">
                    <li style="list-style: none; margin:10px auto -8px;"class="addEmp">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
                            Upload by Excel
                          </button>
                    </li>
                  </ul>
                  

                  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalCenterTitle">Add Employee Using Excel</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body" style="padding:30px 70px;">
                            <div class="loading-overlay">
                                <div>
                                    <div class="d-flex justify-content-center"><div class="spinner d-flex justify-content-center"></div></div><br>
                                    <div class="text-center">Adding Employee Details ...</div>
                                </div>
                            </div>
                            <form method="post" action="/addEmployeebyExcel" id="excelUploadForm" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="file" class="form-control" style="height:max-content;" name="file" accept=".xlsx"><br>
                                <center><button type="submit" class="btn btn-primary">Upload</button></center>
                            </form>
                        </div>
                      </div>
                    </div>
                  </div>
                    
            </nav>
            
            <section class="section container pageClass bg-white rounded dashboard"> 
                <h5 style="color: #009eff; padding: 1%;">Add Employee</h5>
                <center>  
                    <div class="container" >
                    {% if messages %}
                            <div class ="messages" style="width: 300px;">
                
                        {% for message in messages  %}
                                <div class="alert alert-success" role="alert">
                                    <strong style=" font-size: 15px;">! {{message}}</strong> 
                                </div>
                
                        {% endfor %}
                
                            </div>
                            
                    {% endif %}
                    </div> 
                </center>
                <form action="/addEmployee" method="POST" enctype="multipart/form-data" style="margin-left: 9%;">

                    {% csrf_token %}
                    {% for error in form.errors %} 
                      <li>{{ error }}</li>
                    {% endfor %}
                    {% for error in form1.errors %} 
                      <li>{{ error }}</li>
                    {% endfor %}
                    <div class="row">
                        <div class="col-md-6">
                            <div class="inputField">
                                <label for="name">Employee Name</label>
                                {{form1.name}}
                            </div>
                            <div class="date">
                                <label for="dob">Date of Birth</label>
                                {{form1.dob}}
                                
                            </div>
                            <div >
                                <label for="gender">Gender</label>
                                {{form1.gender}}
                    
                            </div>
                            <div>
                                <label for="contact">Official Contact</label>
                                {{form1.company_contact}}
                    
                            </div>
                            <div>
                                <label for="contact">Personal Contact</label>
                                {{form1.personal_contact}}
                    
                            </div>
                            <div>
                                <label for="address">Present Address</label>
                                {{form1.present_address}}
                    
                            </div>
                            <div>
                                <label for="address">Permanent Address</label>
                                {{form1.permanent_address}}
                    
                            </div>
                            <div class="date">
                                <label for="doj">Date of Joining</label>
                                {{form1.doj}}
                    
                            </div>
                            <div>
                                <label for="department">Department</label>
                                {{form1.department}} 
                            </div>
                            <div>
                                <label for="designation">Designation</label>
                                {{form1.designation}}
                    
                            </div>
                            
                            </div>
                    
                            <div class="col-md-6"> 
                    
                            <div>
                                <label for="email">Personal E- Mail</label><br>
                                {{form1.email}}
                    
                            </div>
                            <div>
                                <label for="email">Official E- Mail</label><br>
                                {{form1.office_email}}
                    
                            </div>
                            
                            <div> 
                                <label for="emp_id">Employee ID</label>
                                {{form1.emp_id}}
                            </div>
                            <div> 
                                <label for="re_person">Reporting Person</label>
                                {{form1.reporting}}
                            </div>
                            <div> 
                                <label for="level">Level</label><br>
                                {{form1.level}}
                            </div>
                            <div>
                                <label for="username">Username</label>
                                {{form.username}}
                    
                            </div>
                            <div>
                                <label for="password">Password</label>
                                {{form.password}}
                    
                            </div>
                            <div>
                                <label for="confirm_password">Confirm Password</label>
                                {{form.confirm_password}}
                                <span style="margin-left: 2%;" id="wrong_pass_alert"></span>
                            </div>
                             
                            <div class="card cards "style="margin-bottom:0rem">
                              <div class="card-body" style="padding:1rem">
                                <div class="row">
                                    <div class="col-md-5"> 
                                        <div class="preview">
                                            <img height="110px" width="110px" id="file-ip-1-preview">
                                        </div>
                                    </div>
                                    <div class="col-md-7"  style="text-align: center;"> 
                                        <label style="margin: 13% auto; text-align: center; font-size:12px;" for="id_image">Image<br>(Must be Less than 200KB)  </label>
                                        <input hidden id="id_image" accept="image/*" type="file" id="image" name="image" onchange="showPreview(event);">
                                           <div class="row upup">
                                            <a id="upload_link" href="javascript:void(0)"  type="button"  class="btn btn-primary uploadButton">Upload Photo</a>
                                           </div>
                                        
                                    </div>
                                </div>
                            </div>
                            </div>
                            
                            <div id="photoLabel" style="margin:auto 2% 2% 2%; color:red;"></div> 
                             <div style="margin-left: 2%;">
                                <a href="{% url 'activeEmployee' %}"   class="btn  btn-outline-info btn-md cancel"> Cancel</a>
                                <button type="submit" class="btn   btn-primary btn-sm  add "  onclick="wrong_pass_alert()">Save</button>
                             </div>
                        </div>
                    
                    
                            </form>
               
            </section>
        </div>
    </div> 
    <script> 
        $('#id_image').change(function(){ 
            image = document.getElementById('id_image')  
            console.log(image.files[0].size)
            if(image.files[0].size > 204800) {
                document.getElementById("photoLabel").innerHTML = "Image too big (max 100kb)";
                return false;
            }
            document.getElementById("photoLabel").innerHTML = "";
            return true;
        });
      function validate_password() { 
         var pass = document.getElementById('Password').value;
         var confirm_pass = document.getElementById('Confirm_Password').value;
         if (pass != confirm_pass) {
             document.getElementById('wrong_pass_alert').style.color = 'red';
             document.getElementById('wrong_pass_alert').innerHTML
               = '☒ Use same password';
             document.getElementById('create').disabled = true;
             document.getElementById('create').style.opacity = (0.4);
         } else {
             document.getElementById('wrong_pass_alert').style.color = 'green';
             document.getElementById('wrong_pass_alert').innerHTML =
                 '🗹 Password Matched';
             document.getElementById('create').disabled = false;
             document.getElementById('create').style.opacity = (1);
         }
        }
        
        function wrong_pass_alert() {
         if (document.getElementById('Password').value != document.getElementById('Confirm_Password').value) {
             alert("Password not Matched");
         } 
        }

    </script> 
    <script>
         
    $("#upload_link").click(function(){
   $("#id_image").trigger('click');
    });
    $('#id_image').change(function() {
        var i = $(this).prev('label').clone();
        var file = $('#id_image')[0].files[0].name; 
        $(this).prev('label').html(file); 
    }); 
    function showPreview(event){
     if(event.target.files.length > 0){
    var src = URL.createObjectURL(event.target.files[0]);
    var preview = document.getElementById("file-ip-1-preview");
    preview.src = src;
    preview.style.display = "block";
        }
    }
   </script>
   <script>
        //search shadow
        $(document).ready(function() {
            {
               $(".search").addClass("shadow-none");
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="{% static 'assets\js\main.js' %}"></script>
    <script>
        AOS.init();
    </script>
    <script>
        // JavaScript to show loading overlay on form submission
        document.getElementById('excelUploadForm').addEventListener('submit', function(event) {
            // Show the loading overlay
            document.querySelector('.loading-overlay').style.display = 'flex'; // Display the overlay

            // You might also consider disabling the submit button to prevent multiple submissions
            document.querySelector('.loginButton').setAttribute('disabled', 'true');
        });
    </script>

</body>
</html>